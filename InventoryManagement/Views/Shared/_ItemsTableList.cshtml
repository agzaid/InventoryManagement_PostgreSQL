@using Application.Interfaces.Models
@model Application.Interfaces.Models.Pagination.PagedResult<ItemDto>

@if (Model != null && Model.Items.Any())
{
    foreach (var item in Model.Items)
    {
        <tr class="item-row group hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors border-b border-slate-100 dark:border-slate-700/50"
            data-code="@item.ItemCode"
            data-name="@item.ItemDesc"
            data-catid="@item.CatgryCode">

            @* 1. الإجراءات أولاً *@
            <td class="px-6 py-4 text-center">
                <div class="flex items-center justify-center gap-2 transition-opacity">
                    <button onclick="editItem(this)" class="p-2 text-blue-600 hover:bg-blue-100 rounded-full transition-all" title="تعديل">
                        <span class="material-icons-outlined text-lg">edit_note</span>
                    </button>
                    <button onclick="deleteItem('@item.ItemCode')" class="p-2 text-red-500 hover:bg-red-50 rounded-full transition-all" title="حذف">
                        <span class="material-icons-outlined text-lg">delete_sweep</span>
                    </button>
                </div>
            </td>

            @* 2. الباركود *@
            <td class="px-6 py-4 text-center text-slate-400 font-mono text-xs">
                @item.Barecode
            </td>

            @* 3. الكمية *@
            <td class="px-6 py-4 text-center font-bold text-slate-700 dark:text-slate-200">
                @(item.RecallQnt ?? 0)
            </td>

            @* 4. إعادة الطلب *@
            <td class="px-6 py-4 text-center">
                <span class="px-2 py-1 rounded-md bg-orange-100 text-orange-700 text-xs font-black">
                    @(item.RecallPrc ?? 0)%
                </span>
            </td>

            @* 5. التصنيف الرئيسي *@
            <td class="px-6 py-4 text-slate-600 dark:text-slate-400">
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-slate-300"></span>
                    @item.ItemCategory?.CatgryDesc
                </div>
            </td>

            @* 6. اسم الصنف *@
            <td class="px-6 py-4">
                <span class="inline-block px-3 py-1 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-800 dark:text-slate-200 font-bold shadow-sm">
                    @item.ItemDesc
                </span>
            </td>

            @* 7. كود الصنف في الأخير *@
            <td class="px-6 py-4 text-center font-mono font-bold text-blue-600 bg-blue-50/30 dark:bg-blue-900/5">
                @item.ItemCode
            </td>
        </tr>
    }
}
else
{
    <tr>
        <td colspan="7" class="px-6 py-12 text-center text-slate-400 italic bg-slate-50/50">
            <div class="flex flex-col items-center gap-2">
                <span class="material-icons-outlined text-4xl text-slate-300">search_off</span>
                <span>لا توجد نتائج مطابقة لعملية البحث</span>
            </div>
        </td>
    </tr>
}

<input type="hidden" id="hdnTotalCount" value="@Model.TotalCount" />
<input type="hidden" id="hdnPageNumber" value="@Model.PageNumber" />
<input type="hidden" id="hdnTotalPages" value="@Model.TotalPages" />